<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
<style type="text/css">
	html, body {
		height: 100%;
		margin: 0;
		padding: 0;
		font-family: calibri, sans-serif;
	}
	h1{
		color: blue;
		text-shadow: 1px 1px 1px #07164C;
	}
	#map {
		height: 100%;
		border: 1px solid blue;
		padding: 2px;
	}

	#map h1{
		color: #0101BE;
		text-shadow: 1px 1px 1px #444444;
		font-size: .95rem;
	}


	#map .sucursal{
		color: #FF0000;
		text-shadow: 1px 1px 1px #353535;
	}
</style>
<script type="text/javascript">

	var map;
	var markers = [];
	//coordenadas para la carga del mapa
	var coordenadasIniciales = { lat: 7.8890971, lng: -72.49668959999997 };
	//varible para objeto de informacion del marcador 
	var infowindow;
	
	//informacion y coordenada de sucursales
	var sucursales = [
		['Dromedicas del Oriente SAS',  7.908388743984923 ,  -72.491574883461 , 1],
		['Farmanorte 1',  7.840764903473619 ,  -72.5028133392334 , 2],
		['Farmanorte 2',  7.923595410892432 ,  -72.52201795578003 , 3],
		['Farmanorte 3',  7.917091999388589 ,  -72.49572694301605 , 4],
		['Farmanorte 4 ',  7.9049350202970805 ,  -72.51519441604614 , 5],
		['Farmanorte 5 ',  7.898048740341691 ,  -72.52727508544922 , 6],
		['Farmanorte 6 ',  7.872149774600282 ,  -72.52853035926819 , 7],
		['Farmanorte 7 ',  7.8904609470678055 ,  -72.49629020690918 , 8],
		['Farmanorte 8 ',  7.373990247532279 ,  -72.64909029006958 , 9],
		['Farmanorte 9 ',  7.929875568608961 ,  -72.50390768051147 , 10],
		['Farmanorte 10 ',  7.912830721471756 ,  -72.48752474784851 , 11],
		['FarmaNorte 12 ',  7.88983925194856 ,  -72.49102771282196 , 12],
		['Farmanorte 13 ',  7.886720134976074 ,  -72.51558065414429 , 13],
		['Farmanorte 16 ',  7.607999367664449 ,  -72.59926557540894 , 14],
		['San Antonio del Norte ',  7.887416226152301 ,  -72.5060373544693 , 15],
		['San Martin de Porres ',  7.895763915292502 ,  -72.5098729133606 , 16],

	];

	//carga el objeto mapa y crea el objeto InfoWindow
	function initMap() {
		map = new google.maps.Map(document.getElementById('map'), {
			zoom: 11,
			center: coordenadasIniciales,
		});		
		infowindow = new google.maps.InfoWindow();
	}


	//funcion ejecutada al momento de la carga de la pagina
	function drop() {
		clearMarkers();
		for (var i = 0; i < sucursales.length; i++) {
			var coordenadas = new google.maps.LatLng(sucursales[i][1], sucursales[i][2]);
			var principal = new String(sucursales[i][0]);
	     	var sucursalt = new String('Dromedicas del Oriente SAS');
	     	if(principal.localeCompare(sucursalt)=== 0){
	     		addMarkerWithTimeoutPpal(coordenadas, i * 100, sucursales[i][0], i );
	     		//**Cambie a este metodo si no desea que el marker de la principal sea custom
	     		// addMarkerWithTimeout(coordenadas, i * 100, sucursales[i][0], i );
	     	}else{
	     		addMarkerWithTimeout(coordenadas, i * 100, sucursales[i][0], i );
	     	}						
		}//fin del for
	}//fin del metodo drop


	function clearMarkers() {
		for (var i = 0; i < markers.length; i++) {
			markers[i].setMap(null);
		}
		markers = [];
	}//fin del metodo  clearMarkers


	//anade el marcardor "Marker" al mapa y registra el evento click sobre el marcador
	//para mostrar la informacion de la sucursal en un objeto InfoWindow
	function addMarkerWithTimeout(position, timeout, info, i) {
		window.setTimeout(function() {
			var marker = new google.maps.Marker({
				position: position,
				map: map,
				animation: google.maps.Animation.DROP
				})
			google.maps.event.addListener(marker, 'click', (function(marker, i) {
	        	return function() {
			    infowindow.setContent("<h1><span class='sucursal'>Sucursal </span> "+info+"</h1>");
			    infowindow.open(map, marker);
			        }
			      })
			    (marker, i));
			markers.push(marker);
		}, timeout);	
	}

	//metodo auxiliar para variacion
	function addMarkerWithTimeoutPpal(position, timeout, info, i) {
		window.setTimeout(function() {
			var image = {
	     			url: 'icono.png',
		   			size: new google.maps.Size(40, 44),
	     			origin: new google.maps.Point(0, 0),
	   				anchor: new google.maps.Point(0, 32)
  				};
			var marker = new google.maps.Marker({
				position: position,
				map: map,
				icon: image,
				animation: google.maps.Animation.DROP
				})
			google.maps.event.addListener(marker, 'click', (function(marker, i) {
	        	return function() {
			    infowindow.setContent("<h1><span class='sucursal'></span> "+info+"</h1>");
			    infowindow.open(map, marker);
			        }
			      })
			    (marker, i));
			markers.push(marker);
		}, timeout);	
	}

	//registro de manejo de evento al momento de carga de la pagina
	window.addEventListener('load', drop, false);
</script>
<script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA3lhlUmXlLXYgbTTeGMp89zM6Ym49p5YU&callback=initMap">
</script>

</head>
<!-- api_key_googlemaps_dromedicas  AIzaSyA3lhlUmXlLXYgbTTeGMp89zM6Ym49p5YU-->
<body>
<h1>Farmanorte Mapa contenedor de Pruebas</h1>
<div id="map"></div>	
</body>
</html>